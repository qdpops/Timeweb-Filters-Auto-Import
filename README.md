# Timeweb Mail SIEVE → Filters Auto Import

**Совместимость:** Tampermonkey / Greasemonkey  
**URL:** https://mail.timeweb.com/

## Описание

Этот скрипт автоматически импортирует правила фильтров из файлов `.sieve` в почтовый сервис [Timeweb Mail](https://mail.timeweb.com/), сохраняя структуру папок.  
Скрипт заменяет слэши `/` на точки `.` в названиях папок, чтобы соответствовать формату Timeweb Mail API.

---

## Функционал

- Добавляет кнопку **"Импорт фильтров (.sieve)"** на странице почты.
- Поддерживает файлы `.sieve` и `.txt`.
- Извлекает правила вида: `if header :contains "from" "email" { fileinto "INBOX/..."; }`.
- Преобразует пути папок из формата Sieve (`INBOX/...`) в формат Timeweb Mail (`INBOX....`).
- Отправляет правила на сервер через API с корректным CSRF-токеном и задержкой между запросами.
- Сохраняет существующие письма в папках (`applyToExisted: true`).
- Выводит лог каждой отправки и уведомление по завершении.

---

## Установка

1. Установите [Tampermonkey](https://www.tampermonkey.net/) или Greasemonkey.
2. Создайте новый скрипт и вставьте код.
3. Откройте почту Timeweb Mail.
4. Нажмите на кнопку **"Импорт фильтров (.sieve)"**.
5. Выберите `.sieve` файл и дождитесь окончания импорта.

---

## Примечания

- Перед использованием убедитесь, что вы обновили страницу, чтобы CSRF-токен был доступен.
- Скрипт автоматически заменяет `/` на `.` в путях папок.
- Рекомендуется использовать файлы с корректным синтаксисом Sieve для успешного импорта.
